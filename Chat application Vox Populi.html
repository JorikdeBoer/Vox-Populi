<!DOCTYPE html>
<html>
    <head>
        
        <title>	Vox Populi </title>
        
        <!-- Link naar css style bestand -->
        <link type="text/css" rel="stylesheet" href="Chat application Vox Populi.css" />
	    <meta charset="utf-8">
          
        <script> 
            
         <!-- stuur input enkel naar eigen outputscherm -->    
        function addselftext() {
            var time = new Date();
            var localtime = time.toLocaleTimeString();
            var newtext = "  " +
            document.chatareas.username.value + " " +
            "To Self" + " " +
            localtime + " " + 
            document.chatareas.inputtext.value;
            document.chatareas.outputtext.value +=newtext;}
            
         <!-- stuur input naar server -->
         function submitmessage(){
            var username = document.chatareas.username.value;
            var mykey = "voxpopuli";
            var value = document.chatareas.inputtext.value;
            var xhr = new XMLHttpRequest();  
            var url = 'https://www.codegorilla.nl/read_write/api.php?action=write&mykey='+mykey+'&value='+value;
            xhr.open('POST', url , true); 
            // get message back from server with id number   
            xhr.onload = function () {
            if (xhr.readyState === xhr.DONE) {
            if (xhr.status === 200) { 
                document.chatareas.outputtext.value += "    " +    
                "ID:" + " " + 
                +  xhr.response + " ";       
                getmessage(xhr.response);}}};
            xhr.send();
            }   
                          
         <!-- Ontvang input van server (eigen bericht en id) --> 
         <!-- & Stuur input server naar output scherm -->
         function getmessage(id) {
            var xhr = new XMLHttpRequest();
            var id = lastid;
            var username = document.chatareas.username.value;
            var mykey = "voxpopuli";
            var time = new Date();
            var localtime = time.toLocaleTimeString();
            var url = 'https://www.codegorilla.nl/read_write/api.php?action=read&mykey='+mykey+'&id='+id;
            xhr.open('GET', url , true); 
            xhr.responseType = 'text';
            xhr.onload = function () {
            if (xhr.readyState === xhr.DONE) {
            if (xhr.status === 200) {
                document.chatareas.outputtext.value += " " +
                username + " " + 
                localtime + " " +  
                xhr.responseText}}};
            xhr.send();
            }  
            
          <!-- Ontvang input van server (laatste bericht van de ander) -->
          <!-- naar output scherm WORK IN PROGRESS -->
          function getnextmessage() {
            var xhr = new XMLHttpRequest();
            var id = 1232;
            var username = document.chatareas.username.value;
            var mykey = "voxpopuli";
            var time = new Date();
            var localtime = time.toLocaleTimeString();
            var url = 'https://www.codegorilla.nl/read_write/api.php?action=read&mykey='+mykey+'&id='+id;
            xhr.open('GET', url , true);
            xhr.responseType = 'text';
            xhr.onload = function () {
            if (xhr.readyState === xhr.DONE) {
            if (xhr.status === 200) {
            document.chatareas.outputtext.value += " " +
            xhr.responseText}}
            };
            xhr.send();
            }  
               
        </script>     
    </head>
    
    <!-- Layout chatbox -->
    <div id="border">
        <div id="menu">
            
            <!-- Naam en motto app -->
            <p class="welcome"> <b> Vox Populi: the app for the people! </b></p>
            <div style="clear:both"></div>
        </div>
            
            <!-- Knoppen voor de Chatbox -->
            <form name="chatareas" action="">
            
             <!-- Chatbox zelf -->
            <textarea name="outputtext" cols="60" rows="10">
            Welcome to the Vox Populi chatbox!
            </textarea> 
            <br> 
            <br>
            
            <!-- Tekst vakken gebruiker -->
            <!-- Username tekstvak -->
                Username:
            <input type="text" name="username" id="username">    
            <br>
            <br>
                
            <!-- chat bericht tekstvak -->
            <textarea name= "inputtext" cols="50" rows="3">
            Type your message here!
            </textarea>
            
            <!-- Verstuur knoppen -->
            <input name="sendmsg" type="button" onClick="addselftext();" id="sendmsg" value="Just post for yourself" />
            <input name="submitmsg" type="button" onClick="submitmessage();" id="submitmsg" value="Send to the world" />
            <input name="getmsg" type="button" onClick="getnextmessage();" id="getmsg" value="Get last text" />        
            </form>
    </div>
    
   	<body background="achtergrond.jpg">      
    <script>
    </script>   
    </body>

</html>